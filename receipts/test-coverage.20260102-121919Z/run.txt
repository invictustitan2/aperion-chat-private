
> aperion-chat-private@0.0.0 test:coverage:node /home/dreamboat/projects/aperion-chat-private
> vitest run --coverage -c vitest.coverage.node.config.ts


 RUN  v3.2.4 /home/dreamboat/projects/aperion-chat-private
      Coverage enabled with v8


 ‚õÖÔ∏è wrangler 4.55.0
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Resource location: local 

Use --remote if you want to access the remote instance.

‚úÖ No migrations to apply!
stdout | apps/api-worker/test/auth.test.ts > Authentication Middleware
Starting worker...

stdout | apps/api-worker/test/auth.test.ts > Authentication Middleware
Waiting for worker to be ready...
Will poll every 500ms for up to 12 attempts (6s total)

stderr | apps/api-worker/test/auth.test.ts > Authentication Middleware
[33m‚ñ≤ [43;33m[[43;30mWARNING[43;33m][0m [1mScheduled Workers are not automatically triggered during local development.[0m

  To manually trigger a scheduled event, run:
    curl "http://127.0.0.1:undefined/cdn-cgi/handler/scheduled"
  For more details, see [4mhttps://developers.cloudflare.com/workers/configuration/cron-triggers/#test-cron-triggers-locally[0m



stderr | apps/api-worker/test/auth.test.ts > Authentication Middleware
[33m‚ñ≤ [43;33m[[43;30mWARNING[43;33m][0m [1mAI bindings always access remote resources, and so may incur usage charges even in local dev. To suppress this warning, set `remote: true` for the binding definition in your configuration file.[0m


[33m‚ñ≤ [43;33m[[43;30mWARNING[43;33m][0m [1mVectorize Index bindings do not support local development, and so parts of your Worker may not work correctly. You may be able to set `remote: true` for the binding definition in your configuration file to access a remote version of the resource.[0m



stdout | apps/api-worker/test/auth.test.ts > Authentication Middleware
Attempt 1: Got response with status 401
‚úì Worker ready after 1 attempts (~0.5s)

 ‚úì apps/api-worker/test/auth.test.ts (23 tests) 6822ms
   ‚úì Authentication Middleware > Protected Endpoints > should allow authenticated GET /v1/semantic/search?query=test  674ms

 ‚õÖÔ∏è wrangler 4.55.0
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Resource location: local 

Use --remote if you want to access the remote instance.

‚úÖ No migrations to apply!
stderr | apps/api-worker/test/index.test.ts > API Worker Integration > Missing Authorization -> 401 with exact error shape
[33m‚ñ≤ [43;33m[[43;30mWARNING[43;33m][0m [1mAI bindings always access remote resources, and so may incur usage charges even in local dev. To suppress this warning, set `remote: true` for the binding definition in your configuration file.[0m


[33m‚ñ≤ [43;33m[[43;30mWARNING[43;33m][0m [1mVectorize Index bindings do not support local development, and so parts of your Worker may not work correctly. You may be able to set `remote: true` for the binding definition in your configuration file to access a remote version of the resource.[0m



 ‚úì apps/api-worker/test/index.test.ts (7 tests) 5103ms
   ‚úì API Worker Integration > Missing Authorization -> 401 with exact error shape  2271ms
 ‚úì apps/api-worker/test/lib/authContext.test.ts (5 tests) 683ms
   ‚úì getAuthContext (Cloudflare Access) > refreshes JWKS once when kid is unknown  447ms
 ‚úì test/verify-ci.test.ts (3 tests) 833ms
   ‚úì verify:ci > local mode does not hard-fail when Cloudflare account id is missing  488ms
 ‚úì test/cf-doctor.test.ts (1 test) 200ms
 ‚úì apps/api-worker/test/services/ChatService.test.ts (2 tests) 162ms
stderr | tools/cli/test/cli.test.ts > CLI Commands > verify > should not require AUTH_TOKEN in access mode
‚ö†Ô∏è  Server did not return X-Aperion-Auth-Fingerprint. The API worker may be on an older version.

 ‚úì tools/cli/test/cli.test.ts (4 tests) 117ms
 ‚úì apps/api-worker/test/workerEntrypoint.test.ts (3 tests) 40ms
 ‚úì test/guard-config-drift.test.ts (3 tests) 38ms
stdout | apps/api-worker/test/app.wiring.test.ts > API Worker wiring (in-process coverage) > Missing Authorization -> 401 (auth middleware wired)
{"level":"info","message":"Incoming request: GET http://local.test/v1/conversations","traceId":"956db025-402c-4f8c-af33-37c22b62fa0f","source":"api-worker","timestamp":"2026-01-02T12:19:38.472Z","method":"GET","url":"http://local.test/v1/conversations","userAgent":null}

stdout | apps/api-worker/test/app.wiring.test.ts > API Worker wiring (in-process coverage) > Missing Authorization -> 401 (auth middleware wired)
{"level":"warn","message":"Auth outcome","traceId":"956db025-402c-4f8c-af33-37c22b62fa0f","source":"api-worker","timestamp":"2026-01-02T12:19:38.473Z","event":"auth.outcome","outcome":"deny","mode":"token","method":"GET","path":"/v1/conversations","status":401,"reason":"Unauthorized (missing bearer token)","durationMs":0}

stdout | apps/api-worker/test/app.wiring.test.ts > API Worker wiring (in-process coverage) > Missing Authorization -> 401 (auth middleware wired)
{"level":"info","message":"Request completed","traceId":"956db025-402c-4f8c-af33-37c22b62fa0f","source":"api-worker","timestamp":"2026-01-02T12:19:38.475Z","status":401,"durationMs":3.4958389999992505}

stdout | apps/api-worker/test/app.wiring.test.ts > API Worker wiring (in-process coverage) > Access mode missing assertion -> 401 (fail-closed canary)
{"level":"info","message":"Incoming request: GET http://local.test/v1/conversations","traceId":"3db020ef-de8e-47e6-be86-7136d9923728","source":"api-worker","timestamp":"2026-01-02T12:19:38.476Z","method":"GET","url":"http://local.test/v1/conversations","userAgent":null}

stdout | apps/api-worker/test/app.wiring.test.ts > API Worker wiring (in-process coverage) > Access mode missing assertion -> 401 (fail-closed canary)
{"level":"warn","message":"Auth outcome","traceId":"3db020ef-de8e-47e6-be86-7136d9923728","source":"api-worker","timestamp":"2026-01-02T12:19:38.477Z","event":"auth.outcome","outcome":"deny","mode":"access","method":"GET","path":"/v1/conversations","status":401,"reason":"Missing Access assertion (expected CF-Access-Jwt-Assertion header or CF_Authorization cookie)","durationMs":0}

stdout | apps/api-worker/test/app.wiring.test.ts > API Worker wiring (in-process coverage) > Access mode missing assertion -> 401 (fail-closed canary)
{"level":"info","message":"Request completed","traceId":"3db020ef-de8e-47e6-be86-7136d9923728","source":"api-worker","timestamp":"2026-01-02T12:19:38.477Z","status":401,"durationMs":0.8925530000014987}

stdout | apps/api-worker/test/app.wiring.test.ts > API Worker wiring (in-process coverage) > OPTIONS -> 204 and includes CORS headers
{"level":"info","message":"Incoming request: OPTIONS http://local.test/v1/conversations","traceId":"fe612cf2-6815-4293-a57c-6915d89a76ca","source":"api-worker","timestamp":"2026-01-02T12:19:38.480Z","method":"OPTIONS","url":"http://local.test/v1/conversations","userAgent":null}

stdout | apps/api-worker/test/app.wiring.test.ts > API Worker wiring (in-process coverage) > OPTIONS -> 204 and includes CORS headers
{"level":"info","message":"Request completed","traceId":"fe612cf2-6815-4293-a57c-6915d89a76ca","source":"api-worker","timestamp":"2026-01-02T12:19:38.480Z","status":204,"durationMs":0.8092020000003686}

stdout | apps/api-worker/test/app.wiring.test.ts > API Worker wiring (in-process coverage) > GET -> includes strict CORS headers for allowed origin
{"level":"info","message":"Incoming request: GET http://local.test/v1/nope","traceId":"3d774b4e-63e9-4ff8-bc0b-1bb5505251f4","source":"api-worker","timestamp":"2026-01-02T12:19:38.482Z","method":"GET","url":"http://local.test/v1/nope","userAgent":null}

stdout | apps/api-worker/test/app.wiring.test.ts > API Worker wiring (in-process coverage) > GET -> includes strict CORS headers for allowed origin
{"level":"info","message":"Request completed","traceId":"3d774b4e-63e9-4ff8-bc0b-1bb5505251f4","source":"api-worker","timestamp":"2026-01-02T12:19:38.483Z","status":404,"durationMs":0.9067749999994703}

stdout | apps/api-worker/test/app.wiring.test.ts > API Worker wiring (in-process coverage) > GET -> does not include allow-origin for unknown origin
{"level":"info","message":"Incoming request: GET http://local.test/v1/nope","traceId":"05512709-25b1-4941-a529-8e454d2e4242","source":"api-worker","timestamp":"2026-01-02T12:19:38.485Z","method":"GET","url":"http://local.test/v1/nope","userAgent":null}

stdout | apps/api-worker/test/app.wiring.test.ts > API Worker wiring (in-process coverage) > GET -> does not include allow-origin for unknown origin
{"level":"info","message":"Request completed","traceId":"05512709-25b1-4941-a529-8e454d2e4242","source":"api-worker","timestamp":"2026-01-02T12:19:38.485Z","status":404,"durationMs":0.7052609999991546}

stdout | apps/api-worker/test/app.wiring.test.ts > API Worker wiring (in-process coverage) > Unknown route -> 404
{"level":"info","message":"Incoming request: GET http://local.test/v1/nope","traceId":"e0a33599-1a6c-4eb6-b226-29fbef694310","source":"api-worker","timestamp":"2026-01-02T12:19:38.486Z","method":"GET","url":"http://local.test/v1/nope","userAgent":null}

stdout | apps/api-worker/test/app.wiring.test.ts > API Worker wiring (in-process coverage) > Unknown route -> 404
{"level":"info","message":"Request completed","traceId":"e0a33599-1a6c-4eb6-b226-29fbef694310","source":"api-worker","timestamp":"2026-01-02T12:19:38.487Z","status":404,"durationMs":0.4834100000007311}

stdout | apps/api-worker/test/app.wiring.test.ts > API Worker wiring (in-process coverage) > WebSocket route -> 503 if ChatState not configured
{"level":"info","message":"Incoming request: GET http://local.test/v1/ws","traceId":"a3d62457-ba95-4dbb-992c-f2b93a500d53","source":"api-worker","timestamp":"2026-01-02T12:19:38.488Z","method":"GET","url":"http://local.test/v1/ws","userAgent":null}

stdout | apps/api-worker/test/app.wiring.test.ts > API Worker wiring (in-process coverage) > WebSocket route -> 503 if ChatState not configured
{"level":"info","message":"Request completed","traceId":"a3d62457-ba95-4dbb-992c-f2b93a500d53","source":"api-worker","timestamp":"2026-01-02T12:19:38.489Z","status":503,"durationMs":0.9865260000005946}

stdout | apps/api-worker/test/app.wiring.test.ts > API Worker wiring (in-process coverage) > WebSocket route -> delegates to Durable Object
{"level":"info","message":"Incoming request: GET http://local.test/v1/ws","traceId":"a3a21482-df5c-4963-a55b-c0392a505ac4","source":"api-worker","timestamp":"2026-01-02T12:19:38.491Z","method":"GET","url":"http://local.test/v1/ws","userAgent":null}

stdout | apps/api-worker/test/app.wiring.test.ts > API Worker wiring (in-process coverage) > WebSocket route -> delegates to Durable Object
{"level":"info","message":"Request completed","traceId":"a3a21482-df5c-4963-a55b-c0392a505ac4","source":"api-worker","timestamp":"2026-01-02T12:19:38.491Z","status":200,"durationMs":0.5669989999987592}

 ‚úì apps/api-worker/test/app.wiring.test.ts (8 tests) 26ms
 ‚úì apps/api-worker/src/lib/googleAuth.test.ts (3 tests) 22ms
stdout | apps/api-worker/test/queue.test.ts > Queue Processor > should process semantic messages and generate embeddings
Generated embedding for semantic record rec-2 in 0.06ms

stderr | apps/api-worker/test/queue.test.ts > Queue Processor > should retry if processing fails
Failed to process message msg-3: Error: DB Error
    at run [90m(/home/dreamboat/projects/aperion-chat-private/[39mapps/api-worker/test/queue.test.ts:98:15[90m)[39m
    at Object.run [90m(/home/dreamboat/projects/aperion-chat-private/[39mapps/api-worker/test/bindings/mockBindings.ts:138:30[90m)[39m
    at processEpisodic [90m(/home/dreamboat/projects/aperion-chat-private/[39mapps/api-worker/src/lib/queue-processor.ts:93:6[90m)[39m
    at processMemoryBatch [90m(/home/dreamboat/projects/aperion-chat-private/[39mapps/api-worker/src/lib/queue-processor.ts:39:15[90m)[39m
    at [90m/home/dreamboat/projects/aperion-chat-private/[39mapps/api-worker/test/queue.test.ts:120:11
    at [90mfile:///home/dreamboat/projects/aperion-chat-private/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///home/dreamboat/projects/aperion-chat-private/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///home/dreamboat/projects/aperion-chat-private/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///home/dreamboat/projects/aperion-chat-private/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m

 ‚úì apps/api-worker/test/queue.test.ts (3 tests) 9ms
 ‚úì apps/api-worker/src/lib/speechToText.test.ts (3 tests) 18ms
 ‚úì apps/api-worker/src/lib/renderer.test.ts (2 tests) 13ms
stdout | apps/api-worker/test/queue-job.test.ts > Queue Processor Jobs > should process embed job
Generated embedding for job job-456 in 0.04ms

 ‚úì apps/api-worker/test/queue-job.test.ts (2 tests) 3ms
 ‚úì tools/mcp/aperion/test/memoryIngest.test.ts (4 tests) 7ms
 ‚úì apps/api-worker/test/controllers/EpisodicController.test.ts (9 tests) 13ms
 ‚úì tools/cli/test/seed.test.ts (4 tests) 8ms
 ‚úì apps/api-worker/test/services/RelationshipsService.test.ts (4 tests) 13ms
 ‚úì apps/api-worker/src/lib/ai.branches.test.ts (4 tests) 10ms
 ‚úì apps/api-worker/test/controllers/SemanticController.test.ts (7 tests) 8ms
 ‚úì apps/api-worker/test/controllers/ChatController.test.ts (5 tests) 10ms
 ‚úì apps/api-worker/test/controllers/VoiceController.test.ts (4 tests) 8ms
 ‚úì apps/api-worker/src/lib/textToSpeech.test.ts (1 test) 11ms
stderr | tools/cli/test/export.test.ts > exportData > fetches endpoints and writes jsonl when output provided
‚ùå Failed to fetch identity: Bad

stdout | tools/cli/test/export.test.ts > exportData > handles fetch throw without crashing
Exporting data...
Fetching episodic...

stdout | tools/cli/test/export.test.ts > exportData > handles fetch throw without crashing
Fetching identity...

stdout | tools/cli/test/export.test.ts > exportData > handles fetch throw without crashing
‚úì Exported 0 records to /tmp/out.jsonl

 ‚úì tools/cli/test/export.test.ts (3 tests) 7ms
 ‚úì apps/api-worker/test/controllers/LogsController.test.ts (7 tests) 6ms
 ‚úì tools/cli/test/verify.branches.test.ts (4 tests) 9ms
stdout | apps/api-worker/test/do/ChatState.test.ts > ChatState Durable Object > denies websocket upgrade when unauthenticated
{"level":"info","message":"WS upgrade outcome","source":"api-worker","component":"do.ChatState","event":"ws.upgrade","outcome":"deny","path":"/v1/ws","status":401,"mode":"token","reason":"Unauthorized","closeCode":1008}

 ‚úì apps/api-worker/test/do/ChatState.test.ts (2 tests) 6ms
 ‚úì apps/api-worker/test/services/AnalyticsService.test.ts (1 test) 5ms
 ‚úì apps/api-worker/test/services/KnowledgeService.test.ts (5 tests) 4ms
 ‚úì apps/api-worker/test/controllers/IdentityController.test.ts (4 tests) 6ms
 ‚úì tools/mcp/aperion/test/index.test.ts (5 tests) 4ms
 ‚úì apps/api-worker/test/preferences-theme.test.ts (3 tests) 4ms
 ‚úì apps/api-worker/test/controllers/PreferencesController.test.ts (6 tests) 6ms
 ‚úì apps/api-worker/test/controllers/RelationshipsController.test.ts (2 tests) 5ms
 ‚úì apps/api-worker/test/controllers/ConversationsController.test.ts (4 tests) 12ms
 ‚úì apps/api-worker/test/services/EpisodicService.test.ts (4 tests) 4ms
 ‚úì apps/api-worker/test/middleware/rateLimit.test.ts (5 tests) 5ms
 ‚úì packages/policy/test/policy.test.ts (9 tests) 5ms
 ‚úì packages/memory-core/test/store.test.ts (6 tests) 3ms
 ‚úì apps/api-worker/test/services/SemanticService.test.ts (4 tests) 4ms
 ‚úì apps/api-worker/test/controllers/MediaController.test.ts (5 tests) 5ms
 ‚úì apps/api-worker/test/controllers/InsightsController.test.ts (2 tests) 2ms
 ‚úì apps/api-worker/test/middleware/cors.test.ts (7 tests) 3ms
 ‚úì apps/api-worker/test/services/InsightsService.test.ts (3 tests) 3ms
 ‚úì apps/api-worker/test/services/ConversationsService.test.ts (4 tests) 3ms
 ‚úì apps/api-worker/test/controllers/JobsController.test.ts (3 tests) 8ms
 ‚úì apps/api-worker/test/controllers/AnalyticsController.test.ts (2 tests) 3ms
 ‚úì apps/api-worker/test/middleware/errorHandler.test.ts (2 tests) 2ms
 ‚úì apps/api-worker/test/controllers/KnowledgeController.test.ts (2 tests) 3ms
 ‚úì apps/api-worker/test/services/IdentityService.test.ts (3 tests) 3ms
 ‚úì test/docs_path_b_defaults.test.ts (2 tests) 2ms
 ‚úì packages/memory-core/test/hash.test.ts (6 tests) 2ms
 ‚úì apps/api-worker/src/lib/gemini.test.ts (1 test) 2ms
 ‚úì apps/api-worker/src/lib/workersAiStt.test.ts (3 tests) 2ms
 ‚úì apps/api-worker/test/controllers/ReceiptsController.test.ts (2 tests) 4ms
 ‚úì packages/shared/test/hash.test.ts (3 tests) 1ms
 ‚úì test/docs_deployment_contract.test.ts (2 tests) 2ms
 ‚úì apps/api-worker/test/identity-preferences.test.ts (1 test) 1ms
stdout | apps/api-worker/test/middleware/context.test.ts > withContext Middleware > should attach logger and metrics to request
{"level":"info","message":"Incoming request: undefined undefined","traceId":"72fa115e-bbf3-47b3-906d-f1165b770d17","source":"api-worker","timestamp":"2026-01-02T12:19:42.226Z"}

stdout | apps/api-worker/test/middleware/context.test.ts > withContext Middleware > should use existing cf-ray as traceId if present
{"level":"info","message":"Incoming request: undefined undefined","traceId":"existing-trace-id","source":"api-worker","timestamp":"2026-01-02T12:19:42.227Z","userAgent":"existing-trace-id"}

 ‚úì apps/api-worker/test/middleware/context.test.ts (2 tests) 2ms
 ‚úì apps/api-worker/test/controllers/RunbooksController.test.ts (2 tests) 2ms
 ‚úì test/workflows_deploy_web_path_b.test.ts (4 tests) 2ms
 ‚úì apps/api-worker/test/ai.test.ts (2 tests) 2ms
 ‚úì apps/api-worker/src/lib/vectorStore.test.ts (1 test) 1ms
 ‚úì tools/mcp/aperion/test/repoSearch.test.ts (3 tests) 2ms
 ‚úì apps/api-worker/test/lib/wsDeny.test.ts (1 test) 1ms
 ‚úì tools/mcp/aperion/src/paths.test.ts (2 tests) 1ms
 ‚úì apps/api-worker/test/hello.test.ts (2 tests) 1ms
 ‚úì test/no-network.test.ts (1 test) 1ms
 ‚úì packages/shared/test/shortcuts.test.ts (1 test) 0ms

 Test Files  70 passed (70)
      Tests  262 passed (262)
   Start at  12:19:20
   Duration  23.03s (transform 1.22s, setup 253ms, collect 4.30s, tests 14.34s, environment 0ms, prepare 124ms)

 % Coverage report from v8

=============================== Coverage summary ===============================
Statements   : 80.46% ( 4139/5144 )
Branches     : 68.37% ( 694/1015 )
Functions    : 91.37% ( 212/232 )
Lines        : 80.46% ( 4139/5144 )
================================================================================
ERROR: Coverage for branches (68.37%) does not meet global threshold (70%)
‚ÄâELIFECYCLE‚Äâ Command failed with exit code 1.

> aperion-chat-private@0.0.0 test:coverage:web /home/dreamboat/projects/aperion-chat-private
> vitest run --coverage -c vitest.coverage.web.config.ts --dir apps/web/src


 RUN  v3.2.4 /home/dreamboat/projects/aperion-chat-private
      Coverage enabled with v8

stderr | apps/web/src/components/ui/Toast.test.tsx > useSimpleToast > renders title-only and title+description
An update to Harness inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 ‚ùØ apps/web/src/components/ui/Toast.test.tsx (1 test | 1 failed) 81ms
   √ó useSimpleToast > renders title-only and title+description 78ms
     ‚Üí Unable to find an element with the text: Hello. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"fixed z-[60] bottom-[calc(1rem+env(safe-area-inset-bottom))] right-4 flex w-[92vw] max-w-sm flex-col gap-2 outline-none"[39m
    [36m/>[39m
    [36m<button>[39m
      [0mshow-title[0m
    [36m</button>[39m
    [36m<button>[39m
      [0mshow-both[0m
    [36m</button>[39m
  [36m</div>[39m
[36m</body>[39m
 ‚ùØ apps/web/src/pages/Chat.test.tsx (17 tests | 13 failed) 130617ms
   ‚úì Chat Page > renders the chat interface 111ms
   √ó Chat Page > loads conversations list 10015ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Chat Page > renders conversation search and typing updates value without filtering 10008ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Chat Page > creates a new conversation 10015ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Chat Page > sends a message 10015ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Chat Page > displays chat history 10015ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Chat Page > deletes a conversation 10008ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Chat Page > renames a conversation 10018ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Chat Page > edits a message 10017ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Chat Page > handles voice recording (mocked) 10015ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   ‚úì Chat Page > applies correct desktop layout classes 118ms
   ‚úì Chat Page > uses mobile-safe glass utilities 111ms
   ‚úì Chat Page > accessibility audit: all interactive elements have labels 110ms
   √ó Mobile Navigation > defaults to chat-first mode on mobile 10006ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Mobile Navigation > opens conversations drawer and selects a conversation 10012ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Mobile Navigation > conversations drawer toggle has accessible touch target (tap44) 10007ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Mobile Navigation > ChatInput has mobile safe-area padding 10015ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚úì apps/web/src/components/MessageBubble.test.tsx (13 tests) 1756ms
   ‚úì MessageBubble > calls onCopy when copy button is clicked  407ms
stderr | apps/web/src/pages/Memory.test.tsx > Memory Page > renders the header and default tab (Identity)
Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: ["episodic"]

 ‚ùØ apps/web/src/pages/Memory.test.tsx (6 tests | 6 failed) 60061ms
   √ó Memory Page > renders the header and default tab (Identity) 10012ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Memory Page > switches to Episodic Log tab 10011ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Memory Page > switches to Semantic Search tab and performs search 10011ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Memory Page > expands search result and shows details 10010ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Memory Page > handles search errors 10007ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Memory Page > manages relationships (list and create) 10009ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Insights.test.tsx (5 tests | 4 failed) 40053ms
   ‚úì Insights Page > renders the page header 18ms
   √ó Insights Page > triggers summarization and displays result (immediate) 10006ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Insights Page > handles queued job and polls for result 10007ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Insights Page > handles job failure 10007ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Insights Page > handles API error on start 10014ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚úì apps/web/src/components/ConversationItem.test.tsx (11 tests) 814ms
 ‚ùØ apps/web/src/pages/Logs.test.tsx (9 tests | 8 failed) 80154ms
   √ó Logs Page > renders the header and empty state 10006ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Logs Page > renders a list of logs 10016ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Logs Page > filters logs by level 10016ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Logs Page > searches logs 10015ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Logs Page > expands log details 10008ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Logs Page > refreshes logs 10011ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Logs Page > clears logs 10010ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   ‚úì Logs Page > handles loading state 65ms
   √ó Logs Page > handles error state 10007ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/components/CommandPalette.test.tsx (6 tests | 1 failed) 10512ms
   ‚úì CommandPalette > renders when open 145ms
   ‚úì CommandPalette > does not render when closed 8ms
   ‚úì CommandPalette > navigates to chat 90ms
   √ó CommandPalette > performs memory search 10012ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   ‚úì CommandPalette > navigates with keyboard 174ms
   ‚úì CommandPalette > toggles theme 84ms
 ‚ùØ apps/web/src/pages/Identity.test.tsx (7 tests | 6 failed) 60150ms
   ‚úì Identity Page > renders the header and loading state 73ms
   √ó Identity Page > renders empty state 10011ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Identity Page > renders identity list and preferences 10009ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Identity Page > updates preferences 10015ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Identity Page > creates a new identity 10007ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Identity Page > edits an existing identity 10015ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Identity Page > handles load error 10019ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚úì apps/web/src/components/ChatInput.test.tsx (19 tests) 642ms
 ‚ùØ apps/web/src/pages/Settings.test.tsx (7 tests | 4 failed) 40328ms
   ‚úì Settings Page > renders the header and sections 110ms
   √ó Settings Page > displays API health status 10008ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Settings Page > handles API health check failure 10017ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   ‚úì Settings Page > toggles theme 90ms
   ‚úì Settings Page > does not render auth debug by default 87ms
   √ó Settings Page > runs auth self-test successfully when debug is enabled 10006ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Settings Page > runs auth self-test failure when debug is enabled 10011ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Analytics.test.tsx (5 tests | 4 failed) 40107ms
   √ó Analytics page > renders header and summary 10013ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   ‚úì Analytics page > shows loading state 46ms
   √ó Analytics page > shows error state 10007ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Analytics page > shows empty state 10020ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Analytics page > refetches when range changes 10019ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/hooks/useWebSocket.test.tsx (2 tests | 2 failed) 20021ms
   √ó useWebSocket WS preflight > connects only when identity preflight returns 200 10013ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó useWebSocket WS preflight > skips connect when identity is redirected by Access 10008ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚úì apps/web/src/pages/UILab.test.tsx (1 test) 423ms
   ‚úì UILab > renders and supports input + error interactions  423ms
 ‚ùØ apps/web/src/components/MessageContent.test.tsx (5 tests | 1 failed) 10229ms
   ‚úì MessageContent > renders fenced code blocks and supports expand/collapse 53ms
   ‚úì MessageContent > renders markdown links with target blank 59ms
   ‚úì MessageContent > renders inline code 18ms
   √ó MessageContent > renders mermaid diagrams 10005ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   ‚úì MessageContent > renders tables 93ms
 ‚ùØ apps/web/src/components/Layout.test.tsx (3 tests | 1 failed | 1 skipped) 10233ms
   ‚úì Layout > renders navigation links 223ms
   √ó Layout > loads theme from preferences 10010ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   ‚Üì Layout > toggles mobile menu
 ‚ùØ apps/web/src/pages/SystemStatus.test.tsx (4 tests | 4 failed) 40042ms
   √ó SystemStatus page > shows empty state 10018ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó SystemStatus page > renders logged API error 10009ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó SystemStatus page > filters logs 10008ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó SystemStatus page > clears logs 10008ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Knowledge.test.tsx (6 tests | 6 failed) 60097ms
   √ó Knowledge Page > renders the page header 10018ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Knowledge Page > lists knowledge items 10017ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Knowledge Page > handles empty state 10017ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Knowledge Page > handles search 10018ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Knowledge Page > promotes semantic memory 10020ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Knowledge Page > handles API errors 10007ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚úì apps/web/src/components/ErrorBoundary.test.tsx (2 tests) 95ms
 ‚úì apps/web/src/contexts/ThemeContext.test.tsx (2 tests) 109ms
 ‚úì apps/web/src/App.test.tsx (2 tests) 123ms
 ‚ùØ apps/web/src/pages/Receipts.test.tsx (4 tests | 4 failed) 40067ms
   √ó Receipts Page > renders the page header 10012ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Receipts Page > lists receipts 10019ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Receipts Page > handles empty state 10018ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó Receipts Page > handles API errors 10018ms
     ‚Üí Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚úì apps/web/src/components/EmptyStates.test.tsx (9 tests) 246ms
 ‚úì apps/web/src/components/ConversationSearch.test.tsx (6 tests) 170ms
 ‚úì apps/web/src/lib/api.test.ts (9 tests) 25ms
stdout | apps/web/src/lib/websocket.test.ts > WebSocketClient > connects, sends messages, and reconnects on unexpected close
[WS] Connected
[WS] Closed { code: [33m1006[39m, reason: [32m'boom'[39m, wasClean: [33mfalse[39m }
[WS] Reconnecting in 10ms (attempt 1/1)

stdout | apps/web/src/lib/websocket.test.ts > WebSocketClient > initializeWebSocket creates singleton client and exposes telemetry
[WS] Connected

 ‚úì apps/web/src/lib/websocket.test.ts (3 tests) 107ms
 ‚úì apps/web/src/hooks/useKeyboardShortcuts.test.tsx (1 test) 63ms
 ‚úì apps/web/src/lib/errorLog.test.ts (3 tests) 7ms
 ‚úì apps/web/src/lib/theme.test.ts (6 tests) 28ms
 ‚úì apps/web/src/lib/api.streamAbort.test.ts (1 test) 3ms
 ‚úì apps/web/src/hello.test.ts (1 test) 1ms

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ Failed Tests 65 ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ

 FAIL  apps/web/src/components/CommandPalette.test.tsx > CommandPalette > performs memory search
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/components/CommandPalette.test.tsx:80:3
     78|   });
     79| 
     80|   it("performs memory search", async () => {
       |   ^
     81|     vi.mocked(api.semantic.search).mockResolvedValue([
     82|       {

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/65]‚éØ

 FAIL  apps/web/src/components/Layout.test.tsx > Layout > loads theme from preferences
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/components/Layout.test.tsx:59:3
     57|   });
     58| 
     59|   it("loads theme from preferences", async () => {
       |   ^
     60|     vi.mocked(api.preferences.get).mockResolvedValue({
     61|       value: "light",

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/65]‚éØ

 FAIL  apps/web/src/components/MessageContent.test.tsx > MessageContent > renders mermaid diagrams
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/components/MessageContent.test.tsx:57:3
     55|   });
     56| 
     57|   it("renders mermaid diagrams", async () => {
       |   ^
     58|     const content = "```mermaid\ngraph TD;\nA-->B;\n```";
     59|     render(<MessageContent content={content} />);

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/65]‚éØ

 FAIL  apps/web/src/hooks/useWebSocket.test.tsx > useWebSocket WS preflight > connects only when identity preflight returns 200
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/hooks/useWebSocket.test.tsx:29:3
     27| 
     28| describe("useWebSocket WS preflight", () => {
     29|   it("connects only when identity preflight returns 200", async () => {
       |   ^
     30|     connectMock.mockClear();
     31|     disconnectMock.mockClear();

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[4/65]‚éØ

 FAIL  apps/web/src/hooks/useWebSocket.test.tsx > useWebSocket WS preflight > skips connect when identity is redirected by Access
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/hooks/useWebSocket.test.tsx:52:3
     50|   });
     51| 
     52|   it("skips connect when identity is redirected by Access", async () =‚Ä¶
       |   ^
     53|     connectMock.mockClear();
     54|     disconnectMock.mockClear();

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[5/65]‚éØ

 FAIL  apps/web/src/pages/Analytics.test.tsx > Analytics page > renders header and summary
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Analytics.test.tsx:73:3
     71|   });
     72| 
     73|   it("renders header and summary", async () => {
       |   ^
     74|     vi.mocked(api.analytics.dashboard).mockResolvedValue(mockData);
     75|     renderWithClient(<Analytics />);

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[6/65]‚éØ

 FAIL  apps/web/src/pages/Analytics.test.tsx > Analytics page > shows error state
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Analytics.test.tsx:91:3
     89|   });
     90| 
     91|   it("shows error state", async () => {
       |   ^
     92|     vi.mocked(api.analytics.dashboard).mockRejectedValue(
     93|       new Error("Failed to fetch"),

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[7/65]‚éØ

 FAIL  apps/web/src/pages/Analytics.test.tsx > Analytics page > shows empty state
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Analytics.test.tsx:101:3
     99|   });
    100| 
    101|   it("shows empty state", async () => {
       |   ^
    102|     // eslint-disable-next-line @typescript-eslint/no-explicit-any
    103|     vi.mocked(api.analytics.dashboard).mockResolvedValue(null as any);

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[8/65]‚éØ

 FAIL  apps/web/src/pages/Analytics.test.tsx > Analytics page > refetches when range changes
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Analytics.test.tsx:108:3
    106|   });
    107| 
    108|   it("refetches when range changes", async () => {
       |   ^
    109|     vi.mocked(api.analytics.dashboard).mockResolvedValue(mockData);
    110|     renderWithClient(<Analytics />);

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[9/65]‚éØ

 FAIL  apps/web/src/pages/Chat.test.tsx > Chat Page > loads conversations list
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Chat.test.tsx:121:3
    119|   });
    120| 
    121|   it("loads conversations list", async () => {
       |   ^
    122|     vi.mocked(api.conversations.list).mockResolvedValue([
    123|       {

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[10/65]‚éØ

 FAIL  apps/web/src/pages/Chat.test.tsx > Chat Page > renders conversation search and typing updates value without filtering
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Chat.test.tsx:136:3
    134|   });
    135| 
    136|   it("renders conversation search and typing updates value without fil‚Ä¶
       |   ^
    137|     vi.mocked(api.conversations.list).mockResolvedValue([
    138|       {

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[11/65]‚éØ

 FAIL  apps/web/src/pages/Chat.test.tsx > Chat Page > creates a new conversation
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Chat.test.tsx:170:3
    168|   });
    169| 
    170|   it("creates a new conversation", async () => {
       |   ^
    171|     vi.mocked(api.conversations.create).mockResolvedValue({
    172|       id: "2",

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[12/65]‚éØ

 FAIL  apps/web/src/pages/Chat.test.tsx > Chat Page > sends a message
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Chat.test.tsx:188:3
    186|   });
    187| 
    188|   it("sends a message", async () => {
       |   ^
    189|     vi.mocked(api.episodic.create).mockResolvedValue({
    190|       success: true,

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[13/65]‚éØ

 FAIL  apps/web/src/pages/Chat.test.tsx > Chat Page > displays chat history
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Chat.test.tsx:219:3
    217|   });
    218| 
    219|   it("displays chat history", async () => {
       |   ^
    220|     vi.mocked(api.episodic.list).mockResolvedValue([
    221|       {

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[14/65]‚éØ

 FAIL  apps/web/src/pages/Chat.test.tsx > Chat Page > deletes a conversation
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Chat.test.tsx:265:3
    263|   });
    264| 
    265|   it("deletes a conversation", async () => {
       |   ^
    266|     vi.mocked(api.conversations.list).mockResolvedValue([
    267|       {

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[15/65]‚éØ

 FAIL  apps/web/src/pages/Chat.test.tsx > Chat Page > renames a conversation
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Chat.test.tsx:294:3
    292|   });
    293| 
    294|   it("renames a conversation", async () => {
       |   ^
    295|     vi.mocked(api.conversations.list).mockResolvedValue([
    296|       {

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[16/65]‚éØ

 FAIL  apps/web/src/pages/Chat.test.tsx > Chat Page > edits a message
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Chat.test.tsx:329:3
    327|   });
    328| 
    329|   it("edits a message", async () => {
       |   ^
    330|     vi.mocked(api.episodic.list).mockResolvedValue([
    331|       {

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[17/65]‚éØ

 FAIL  apps/web/src/pages/Chat.test.tsx > Chat Page > handles voice recording (mocked)
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Chat.test.tsx:384:3
    382|   });
    383| 
    384|   it("handles voice recording (mocked)", async () => {
       |   ^
    385|     const mockMediaRecorder = {
    386|       start: vi.fn(),

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[18/65]‚éØ

 FAIL  apps/web/src/pages/Chat.test.tsx > Mobile Navigation > defaults to chat-first mode on mobile
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Chat.test.tsx:478:3
    476|   });
    477| 
    478|   it("defaults to chat-first mode on mobile", async () => {
       |   ^
    479|     vi.mocked(api.conversations.list).mockResolvedValue([]);
    480|     vi.mocked(api.episodic.list).mockResolvedValue([]);

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[19/65]‚éØ

 FAIL  apps/web/src/pages/Chat.test.tsx > Mobile Navigation > opens conversations drawer and selects a conversation
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Chat.test.tsx:493:3
    491|   });
    492| 
    493|   it("opens conversations drawer and selects a conversation", async ()‚Ä¶
       |   ^
    494|     vi.mocked(api.conversations.list).mockResolvedValue([
    495|       {

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[20/65]‚éØ

 FAIL  apps/web/src/pages/Chat.test.tsx > Mobile Navigation > conversations drawer toggle has accessible touch target (tap44)
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Chat.test.tsx:519:3
    517|   });
    518| 
    519|   it("conversations drawer toggle has accessible touch target (tap44)"‚Ä¶
       |   ^
    520|     vi.mocked(api.conversations.list).mockResolvedValue([]);
    521|     vi.mocked(api.episodic.list).mockResolvedValue([]);

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[21/65]‚éØ

 FAIL  apps/web/src/pages/Chat.test.tsx > Mobile Navigation > ChatInput has mobile safe-area padding
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Chat.test.tsx:529:3
    527|   });
    528| 
    529|   it("ChatInput has mobile safe-area padding", async () => {
       |   ^
    530|     vi.mocked(api.conversations.list).mockResolvedValue([
    531|       {

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[22/65]‚éØ

 FAIL  apps/web/src/pages/Identity.test.tsx > Identity Page > renders empty state
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Identity.test.tsx:46:3
     44|   });
     45| 
     46|   it("renders empty state", async () => {
       |   ^
     47|     vi.mocked(api.identity.list).mockResolvedValue([]);
     48|     renderWithClient(<Identity />);

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[23/65]‚éØ

 FAIL  apps/web/src/pages/Identity.test.tsx > Identity Page > renders identity list and preferences
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Identity.test.tsx:55:3
     53|   });
     54| 
     55|   it("renders identity list and preferences", async () => {
       |   ^
     56|     const mockIdentities = [
     57|       {

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[24/65]‚éØ

 FAIL  apps/web/src/pages/Identity.test.tsx > Identity Page > updates preferences
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Identity.test.tsx:108:3
    106|   });
    107| 
    108|   it("updates preferences", async () => {
       |   ^
    109|     vi.mocked(api.identity.list).mockResolvedValue([]);
    110|     vi.mocked(api.identity.create).mockResolvedValue({

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[25/65]‚éØ

 FAIL  apps/web/src/pages/Identity.test.tsx > Identity Page > creates a new identity
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Identity.test.tsx:130:3
    128|   });
    129| 
    130|   it("creates a new identity", async () => {
       |   ^
    131|     vi.mocked(api.identity.list).mockResolvedValue([]);
    132|     vi.mocked(api.identity.create).mockResolvedValue({

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[26/65]‚éØ

 FAIL  apps/web/src/pages/Identity.test.tsx > Identity Page > edits an existing identity
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Identity.test.tsx:160:3
    158|   });
    159| 
    160|   it("edits an existing identity", async () => {
       |   ^
    161|     const mockIdentities = [
    162|       {

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[27/65]‚éØ

 FAIL  apps/web/src/pages/Identity.test.tsx > Identity Page > handles load error
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Identity.test.tsx:233:3
    231|   });
    232| 
    233|   it("handles load error", async () => {
       |   ^
    234|     vi.mocked(api.identity.list).mockRejectedValue(new Error("Failed t‚Ä¶
    235|     renderWithClient(<Identity />);

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[28/65]‚éØ

 FAIL  apps/web/src/pages/Insights.test.tsx > Insights Page > triggers summarization and displays result (immediate)
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Insights.test.tsx:47:3
     45|   });
     46| 
     47|   it("triggers summarization and displays result (immediate)", async (‚Ä¶
       |   ^
     48|     vi.mocked(api.insights.summarize).mockResolvedValue({
     49|       success: true,

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[29/65]‚éØ

 FAIL  apps/web/src/pages/Insights.test.tsx > Insights Page > handles queued job and polls for result
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Insights.test.tsx:73:3
     71|   });
     72| 
     73|   it("handles queued job and polls for result", async () => {
       |   ^
     74|     // 1. Start job -> queued
     75|     vi.mocked(api.insights.summarize).mockResolvedValue({

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[30/65]‚éØ

 FAIL  apps/web/src/pages/Insights.test.tsx > Insights Page > handles job failure
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Insights.test.tsx:100:3
     98|   });
     99| 
    100|   it("handles job failure", async () => {
       |   ^
    101|     vi.mocked(api.insights.summarize).mockResolvedValue({
    102|       success: true,

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[31/65]‚éØ

 FAIL  apps/web/src/pages/Insights.test.tsx > Insights Page > handles API error on start
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Insights.test.tsx:123:3
    121|   });
    122| 
    123|   it("handles API error on start", async () => {
       |   ^
    124|     vi.mocked(api.insights.summarize).mockRejectedValue(
    125|       new Error("Start failed"),

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[32/65]‚éØ

 FAIL  apps/web/src/pages/Knowledge.test.tsx > Knowledge Page > renders the page header
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Knowledge.test.tsx:35:3
     33|   });
     34| 
     35|   it("renders the page header", async () => {
       |   ^
     36|     vi.mocked(api.knowledge.list).mockResolvedValue([]);
     37|     renderWithClient(<Knowledge />);

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[33/65]‚éØ

 FAIL  apps/web/src/pages/Knowledge.test.tsx > Knowledge Page > lists knowledge items
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Knowledge.test.tsx:44:3
     42|   });
     43| 
     44|   it("lists knowledge items", async () => {
       |   ^
     45|     const mockItems = [
     46|       {

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[34/65]‚éØ

 FAIL  apps/web/src/pages/Knowledge.test.tsx > Knowledge Page > handles empty state
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Knowledge.test.tsx:77:3
     75|   });
     76| 
     77|   it("handles empty state", async () => {
       |   ^
     78|     vi.mocked(api.knowledge.list).mockResolvedValue([]);
     79|     renderWithClient(<Knowledge />);

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[35/65]‚éØ

 FAIL  apps/web/src/pages/Knowledge.test.tsx > Knowledge Page > handles search
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Knowledge.test.tsx:85:3
     83|   });
     84| 
     85|   it("handles search", async () => {
       |   ^
     86|     vi.mocked(api.knowledge.list).mockResolvedValue([]);
     87|     renderWithClient(<Knowledge />);

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[36/65]‚éØ

 FAIL  apps/web/src/pages/Knowledge.test.tsx > Knowledge Page > promotes semantic memory
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Knowledge.test.tsx:100:3
     98|   });
     99| 
    100|   it("promotes semantic memory", async () => {
       |   ^
    101|     vi.mocked(api.knowledge.list).mockResolvedValue([]);
    102|     vi.mocked(api.knowledge.promote).mockResolvedValue({

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[37/65]‚éØ

 FAIL  apps/web/src/pages/Knowledge.test.tsx > Knowledge Page > handles API errors
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Knowledge.test.tsx:127:3
    125|   });
    126| 
    127|   it("handles API errors", async () => {
       |   ^
    128|     vi.mocked(api.knowledge.list).mockRejectedValue(
    129|       new Error("Failed to fetch"),

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[38/65]‚éØ

 FAIL  apps/web/src/pages/Logs.test.tsx > Logs Page > renders the header and empty state
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Logs.test.tsx:61:3
     59|   });
     60| 
     61|   it("renders the header and empty state", async () => {
       |   ^
     62|     vi.mocked(api.logs.list).mockResolvedValue([]);
     63| 

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39/65]‚éØ

 FAIL  apps/web/src/pages/Logs.test.tsx > Logs Page > renders a list of logs
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Logs.test.tsx:74:3
     72|   });
     73| 
     74|   it("renders a list of logs", async () => {
       |   ^
     75|     vi.mocked(api.logs.list).mockResolvedValue(mockLogs);
     76| 

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[40/65]‚éØ

 FAIL  apps/web/src/pages/Logs.test.tsx > Logs Page > filters logs by level
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Logs.test.tsx:88:3
     86|   });
     87| 
     88|   it("filters logs by level", async () => {
       |   ^
     89|     vi.mocked(api.logs.list).mockResolvedValue(mockLogs);
     90| 

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[41/65]‚éØ

 FAIL  apps/web/src/pages/Logs.test.tsx > Logs Page > searches logs
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Logs.test.tsx:105:3
    103|   });
    104| 
    105|   it("searches logs", async () => {
       |   ^
    106|     vi.mocked(api.logs.list).mockResolvedValue(mockLogs);
    107| 

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[42/65]‚éØ

 FAIL  apps/web/src/pages/Logs.test.tsx > Logs Page > expands log details
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Logs.test.tsx:121:3
    119|   });
    120| 
    121|   it("expands log details", async () => {
       |   ^
    122|     vi.mocked(api.logs.list).mockResolvedValue(mockLogs);
    123| 

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[43/65]‚éØ

 FAIL  apps/web/src/pages/Logs.test.tsx > Logs Page > refreshes logs
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Logs.test.tsx:139:3
    137|   });
    138| 
    139|   it("refreshes logs", async () => {
       |   ^
    140|     vi.mocked(api.logs.list).mockResolvedValue(mockLogs);
    141| 

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[44/65]‚éØ

 FAIL  apps/web/src/pages/Logs.test.tsx > Logs Page > clears logs
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Logs.test.tsx:154:3
    152|   });
    153| 
    154|   it("clears logs", async () => {
       |   ^
    155|     vi.mocked(api.logs.list).mockResolvedValue(mockLogs);
    156|     vi.mocked(api.logs.clear).mockResolvedValue({ success: true, delet‚Ä¶

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[45/65]‚éØ

 FAIL  apps/web/src/pages/Logs.test.tsx > Logs Page > handles error state
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Logs.test.tsx:183:3
    181|   });
    182| 
    183|   it("handles error state", async () => {
       |   ^
    184|     vi.mocked(api.logs.list).mockRejectedValue(new Error("Failed to fe‚Ä¶
    185| 

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[46/65]‚éØ

 FAIL  apps/web/src/pages/Memory.test.tsx > Memory Page > renders the header and default tab (Identity)
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Memory.test.tsx:67:3
     65|   });
     66| 
     67|   it("renders the header and default tab (Identity)", async () => {
       |   ^
     68|     vi.mocked(api.identity.list).mockResolvedValue([]);
     69|     renderWithClient(<Memory />);

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[47/65]‚éØ

 FAIL  apps/web/src/pages/Memory.test.tsx > Memory Page > switches to Episodic Log tab
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Memory.test.tsx:81:3
     79|   });
     80| 
     81|   it("switches to Episodic Log tab", async () => {
       |   ^
     82|     vi.mocked(api.episodic.list).mockResolvedValue([]);
     83|     renderWithClient(<Memory />);

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[48/65]‚éØ

 FAIL  apps/web/src/pages/Memory.test.tsx > Memory Page > switches to Semantic Search tab and performs search
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Memory.test.tsx:89:3
     87|   });
     88| 
     89|   it("switches to Semantic Search tab and performs search", async () =‚Ä¶
       |   ^
     90|     vi.mocked(api.semantic.search).mockResolvedValue([
     91|       {

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[49/65]‚éØ

 FAIL  apps/web/src/pages/Memory.test.tsx > Memory Page > expands search result and shows details
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Memory.test.tsx:121:3
    119|   });
    120| 
    121|   it("expands search result and shows details", async () => {
       |   ^
    122|     vi.mocked(api.semantic.search).mockResolvedValue([
    123|       {

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[50/65]‚éØ

 FAIL  apps/web/src/pages/Memory.test.tsx > Memory Page > handles search errors
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Memory.test.tsx:149:3
    147|   });
    148| 
    149|   it("handles search errors", async () => {
       |   ^
    150|     vi.mocked(api.semantic.search).mockRejectedValue(
    151|       new Error("Search failed"),

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[51/65]‚éØ

 FAIL  apps/web/src/pages/Memory.test.tsx > Memory Page > manages relationships (list and create)
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Memory.test.tsx:165:3
    163|   });
    164| 
    165|   it("manages relationships (list and create)", async () => {
       |   ^
    166|     const mockResult = {
    167|       id: "sem-1",

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[52/65]‚éØ

 FAIL  apps/web/src/pages/Receipts.test.tsx > Receipts Page > renders the page header
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Receipts.test.tsx:34:3
     32|   });
     33| 
     34|   it("renders the page header", async () => {
       |   ^
     35|     vi.mocked(api.receipts.list).mockResolvedValue([]);
     36|     renderWithClient(<Receipts />);

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[53/65]‚éØ

 FAIL  apps/web/src/pages/Receipts.test.tsx > Receipts Page > lists receipts
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Receipts.test.tsx:43:3
     41|   });
     42| 
     43|   it("lists receipts", async () => {
       |   ^
     44|     const mockReceipts = [
     45|       {

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[54/65]‚éØ

 FAIL  apps/web/src/pages/Receipts.test.tsx > Receipts Page > handles empty state
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Receipts.test.tsx:73:3
     71|   });
     72| 
     73|   it("handles empty state", async () => {
       |   ^
     74|     vi.mocked(api.receipts.list).mockResolvedValue([]);
     75|     renderWithClient(<Receipts />);

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[55/65]‚éØ

 FAIL  apps/web/src/pages/Receipts.test.tsx > Receipts Page > handles API errors
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Receipts.test.tsx:79:3
     77|   });
     78| 
     79|   it("handles API errors", async () => {
       |   ^
     80|     vi.mocked(api.receipts.list).mockRejectedValue(
     81|       new Error("Failed to fetch receipts"),

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[56/65]‚éØ

 FAIL  apps/web/src/pages/Settings.test.tsx > Settings Page > displays API health status
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Settings.test.tsx:62:3
     60|   });
     61| 
     62|   it("displays API health status", async () => {
       |   ^
     63|     // Mock successful health check with a delay to catch loading state
     64|     let resolveHealth: (value: unknown) => void;

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[57/65]‚éØ

 FAIL  apps/web/src/pages/Settings.test.tsx > Settings Page > handles API health check failure
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Settings.test.tsx:82:3
     80|   });
     81| 
     82|   it("handles API health check failure", async () => {
       |   ^
     83|     // Mock failed health check
     84|     vi.mocked(api.episodic.list).mockRejectedValue(new Error("Network ‚Ä¶

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[58/65]‚éØ

 FAIL  apps/web/src/pages/Settings.test.tsx > Settings Page > runs auth self-test successfully when debug is enabled
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Settings.test.tsx:118:3
    116|   });
    117| 
    118|   it("runs auth self-test successfully when debug is enabled", async (‚Ä¶
       |   ^
    119|     vi.mocked(shouldShowDevDebugUi).mockReturnValue(true);
    120|     vi.mocked(api.identity.list).mockResolvedValue([

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[59/65]‚éØ

 FAIL  apps/web/src/pages/Settings.test.tsx > Settings Page > runs auth self-test failure when debug is enabled
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/Settings.test.tsx:151:3
    149|   });
    150| 
    151|   it("runs auth self-test failure when debug is enabled", async () => {
       |   ^
    152|     vi.mocked(shouldShowDevDebugUi).mockReturnValue(true);
    153|     vi.mocked(api.identity.list).mockRejectedValue(new Error("Auth Fai‚Ä¶

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[60/65]‚éØ

 FAIL  apps/web/src/pages/SystemStatus.test.tsx > SystemStatus page > shows empty state
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/SystemStatus.test.tsx:45:3
     43|   });
     44| 
     45|   it("shows empty state", async () => {
       |   ^
     46|     renderWithClient(<SystemStatus />);
     47|     expect(

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[61/65]‚éØ

 FAIL  apps/web/src/pages/SystemStatus.test.tsx > SystemStatus page > renders logged API error
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/SystemStatus.test.tsx:52:3
     50|   });
     51| 
     52|   it("renders logged API error", async () => {
       |   ^
     53|     logApiError({
     54|       url: "http://localhost:8787/v1/episodic",

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[62/65]‚éØ

 FAIL  apps/web/src/pages/SystemStatus.test.tsx > SystemStatus page > filters logs
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/SystemStatus.test.tsx:69:3
     67|   });
     68| 
     69|   it("filters logs", async () => {
       |   ^
     70|     logApiError({
     71|       url: "/api",

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[63/65]‚éØ

 FAIL  apps/web/src/pages/SystemStatus.test.tsx > SystemStatus page > clears logs
Error: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ‚ùØ apps/web/src/pages/SystemStatus.test.tsx:95:3
     93|   });
     94| 
     95|   it("clears logs", async () => {
       |   ^
     96|     logRuntimeError(new Error("Test Error"));
     97|     renderWithClient(<SystemStatus />);

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[64/65]‚éØ

 FAIL  apps/web/src/components/ui/Toast.test.tsx > useSimpleToast > renders title-only and title+description
TestingLibraryElementError: Unable to find an element with the text: Hello. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"fixed z-[60] bottom-[calc(1rem+env(safe-area-inset-bottom))] right-4 flex w-[92vw] max-w-sm flex-col gap-2 outline-none"[39m
    [36m/>[39m
    [36m<button>[39m
      [0mshow-title[0m
    [36m</button>[39m
    [36m<button>[39m
      [0mshow-both[0m
    [36m</button>[39m
  [36m</div>[39m
[36m</body>[39m
 ‚ùØ Object.getElementError node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/config.js:37:19
 ‚ùØ node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ‚ùØ node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ‚ùØ node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ‚ùØ apps/web/src/components/ui/Toast.test.tsx:72:19
     70|     fireEvent.click(screen.getByText("show-title"));
     71|     vi.runAllTimers();
     72|     expect(screen.getByText("Hello")).toBeInTheDocument();
       |                   ^
     73| 
     74|     fireEvent.click(screen.getByText("show-both"));

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[65/65]‚éØ


 Test Files  15 failed | 16 passed (31)
      Tests  65 failed | 110 passed | 1 skipped (176)
   Start at  12:19:45
   Duration  654.65s (transform 1.66s, setup 434ms, collect 3.36s, tests 647.36s, environment 757ms, prepare 132ms)

‚ÄâELIFECYCLE‚Äâ Command failed with exit code 1.
