# Cloudflare Surface Map (Private)

> **Status:** Full (canonical)
> \
> **Last reviewed:** 2026-01-02
> \
> **Audience:** Operator + Dev
> \
> **Canonical for:** Cloudflare surfaces (names only) and where they are defined

This document records the authoritative Cloudflare “surfaces” this repo owns and deploys to.

Rules:

- Names only (no IDs, no tokens)
- Source of truth is `wrangler.toml` + GitHub Actions workflows

## Workers

### API Worker

- Worker name (production): `aperion-api-worker`
- Worker name (preview): `aperion-api-worker-preview`
- Config: `apps/api-worker/wrangler.toml`
- Environments:
  - `""` (production / default)
  - `preview` (PR previews)
  - `test` (local/unit tests)
- Expected custom domain:
  - `api.aperion.cc` (Worker Custom Domain via `routes` in Wrangler config)
  - Path B mount (same-origin API): `chat.aperion.cc/api/*` (route served by this Worker)

## Pages

### Web App

- Pages project name: `aperion-chat-private`
- Config: `wrangler.toml` (generated by Wrangler; production bindings for the Pages project)
- Workflows:
  - Production deploy: `.github/workflows/deploy-web.yml`
  - PR preview deploy: `.github/workflows/preview.yml`
- Environments:
  - Production: `chat.aperion.cc`
  - Preview: `*.pages.dev` (Cloudflare Pages preview URLs)
- Expected custom domain:
  - `chat.aperion.cc` (configured in Cloudflare Pages project settings)

## Domain Pairing

- Frontend (Pages): `https://chat.aperion.cc`
- API (Worker): `https://api.aperion.cc`

Path B note (same-origin API): the browser-facing API is served under the same origin as the UI:

- `https://chat.aperion.cc/api/*`

Evidence: `apps/api-worker/wrangler.toml` `routes = [...]` includes `chat.aperion.cc/api/*`.

## Where These Names Appear

- Pages project name: `.github/workflows/deploy-web.yml`, `.github/workflows/preview.yml`
- Worker name(s) and routes: `apps/api-worker/wrangler.toml`
- Deploy workflows: `.github/workflows/deploy-api.yml` (Worker), `.github/workflows/deploy-web.yml` (Pages)
